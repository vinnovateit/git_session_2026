import React, { useState } from "react";

function App() {
  const [formData, setFormData] = useState({
    soil_pH: 6.5,
    moisture: 0.6,
    rainfall: "medium",
    temperature: 28,
    farm_size: 2,
    priority: "balanced",
  });

  const [result, setResult] = useState(null);

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value,
    });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    const response = await fetch("http://127.0.0.1:5000/recommend", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(formData),
    });
    const data = await response.json();
    setResult(data);
  };

  return (
    <div style={{ padding: "20px" }}>
      <h1>AgroMind Crop Recommendation</h1>
      <form onSubmit={handleSubmit}>
        <label>Soil pH: </label>
        <input type="number" step="0.1" name="soil_pH" value={formData.soil_pH} onChange={handleChange} /><br /><br />

        <label>Moisture: </label>
        <input type="number" step="0.1" name="moisture" value={formData.moisture} onChange={handleChange} /><br /><br />

        <label>Rainfall: </label>
        <select name="rainfall" value={formData.rainfall} onChange={handleChange}>
          <option value="low">Low</option>
          <option value="medium">Medium</option>
          <option value="high">High</option>
        </select><br /><br />

        <label>Temperature: </label>
        <input type="number" name="temperature" value={formData.temperature} onChange={handleChange} /><br /><br />

        <label>Farm Size (acres): </label>
        <input type="number" name="farm_size" value={formData.farm_size} onChange={handleChange} /><br /><br />

        <label>Priority: </label>
        <select name="priority" value={formData.priority} onChange={handleChange}>
          <option value="balanced">Balanced</option>
          <option value="profit">Profit</option>
          <option value="sustainability">Sustainability</option>
        </select><br /><br />

        <button type="submit">Get Recommendation</button>
      </form>

      {result && (
  <div style={{ marginTop: "20px" }}>
    <h2>ğŸŒ± Recommendations:</h2>
    <h3>ğŸŒ¾ Primary Crop: {result.primary}</h3>
    <h4>ğŸŒ± Backup Crop: {result.backup}</h4>

    <h4 style={{ marginTop: "15px" }}>ğŸ“Š Details:</h4>
    <ul>
      {result.recommendations.map((rec, index) => (
        <li key={index} style={{ marginBottom: "15px", border: "1px solid #ccc", padding: "10px", borderRadius: "8px" }}>
          <strong>{rec.crop}</strong><br />
          ğŸ’¡ <em>{rec.advice}</em><br />
          ğŸ“ˆ Profit: ${rec.profit}<br />
          ğŸŒ¾ Yield: {rec.yield} kg<br />
          ğŸŒ Sustainability: {rec.sustainability}%<br />
          â­ Score: {rec.score}
        </li>
      ))}
    </ul>
  </div>
)}

    </div>
  );
}

export default App;
